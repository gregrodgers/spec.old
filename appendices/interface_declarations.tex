% This is interface_declarations.tex (Appendix B) of the OpenMP specification.
% This is an included file. See the master file for more information.
%
% When editing this file:
%
%    1. To change formatting, appearance, or style, please edit openmp.sty.
%
%    2. Custom commands and macros are defined in openmp.sty.
%
%    3. Be kind to other editors -- keep a consistent style by copying-and-pasting to
%       create new content.
%
%    4. We use semantic markup, e.g. (see openmp.sty for a full list):
%         \code{}     % for bold monospace keywords, code, operators, etc.
%         \plc{}      % for italic placeholder names, grammar, etc.
%
%    5. There are environments that provide special formatting, e.g. language bars.
%       Please use them whereever appropriate.  Examples are:
%
%         \begin{fortranspecific}
%         This is text that appears enclosed in blue language bars for Fortran.
%         \end{fortranspecific}
%
%         \begin{note}
%         This is a note.  The "Note -- " header appears automatically.
%         \end{note}
%
%    6. Other recommendations:
%         Use the convenience macros defined in openmp.sty for the minor headers
%         such as Comments, Syntax, etc.
%
%         To keep items together on the same page, prefer the use of
%         \begin{samepage}.... Avoid \parbox for text blocks as it interrupts line numbering.
%         When possible, avoid \filbreak, \pagebreak, \newpage, \clearpage unless that's
%         what you mean. Use \needspace{} cautiously for troublesome paragraphs.
%
%         Avoid absolute lengths and measures in this file; use relative units when possible.
%         Vertical space can be relative to \baselineskip or ex units. Horizontal space
%         can be relative to \linewidth or em units.
%
%         Prefer \emph{} to italicize terminology, e.g.:
%             This is a \emph{definition}, not a placeholder.
%             This is a \plc{var-name}.
%



\chapter{Interface Declarations}
\index{interface declarations}
\index{header files}
\index{include files}
\label{chap:Interface Declarations}
This appendix gives examples of the C/C++ header file, the Fortran \code{include} file and
Fortran \code{module} that shall be provided by implementations as specified in Chapter 3. It
also includes an example of a Fortran 90 generic interface for a library routine. This is a
non-normative section, implementation files may differ.




%\pagebreak
\section{Example of the \hcode{omp.h} Header File}
\label{sec:Example of the omp.h Header File}
{\small \begin{ompcFunction}
#ifndef _OMP_H_DEF
#define _OMP_H_DEF

/*
 * define the lock data types
 */
typedef void *omp_lock_t;

typedef void *omp_nest_lock_t;

/*
 * define the synchronization hints
 */
typedef enum omp_sync_hint_t {
  omp_sync_hint_none = 0x0,
  omp_lock_hint_none = omp_sync_hint_none,
  omp_sync_hint_uncontended = 0x1,
  omp_lock_hint_uncontended = omp_sync_hint_uncontended,
  omp_sync_hint_contended = 0x2,
  omp_lock_hint_contended = omp_sync_hint_contended,
  omp_sync_hint_nonspeculative = 0x4,
  omp_lock_hint_nonspeculative = omp_sync_hint_nonspeculative,
  omp_sync_hint_speculative = 0x8,
  omp_lock_hint_speculative = omp_sync_hint_speculative
  /* ,
   Add vendor specific constants for lock hints here,
   starting from the most-significant bit. */
} omp_sync_hint_t;

/* omp_lock_hint_t has been deprecated */
typedef omp_sync_hint_t omp_lock_hint_t;

/*
 * define the schedule kinds
 */
typedef enum omp_sched_t
{
  omp_sched_static = 0x1,
  omp_sched_dynamic = 0x2,
  omp_sched_guided = 0x3,
  omp_sched_auto = 0x4,
  /* Add vendor specific schedule constants here */
  omp_sched_monotonic = 0x80000000u
} omp_sched_t;

/*
 * define the proc bind values
 */
typedef enum omp_proc_bind_t
{
  omp_proc_bind_false = 0,
  omp_proc_bind_true = 1,
  omp_proc_bind_master = 2,
  omp_proc_bind_close = 3,
  omp_proc_bind_spread = 4
} omp_proc_bind_t;

/*
 * define memory management types
 */
typedef uintptr_t omp_uintptr_t;

typedef enum omp_allocator_handle_t {
  OMP_NULL_ALLOCATOR = 0,
  /* The rest of the enumerators have
     implementation specific values.  */
  omp_default_mem_alloc = -12,
  omp_large_cap_mem_alloc,
  omp_const_mem_alloc,
  omp_high_bw_mem_alloc,
  omp_low_lat_mem_alloc,
  omp_cgroup_mem_alloc,
  omp_pteam_mem_alloc,
  omp_thread_mem_alloc
  /* ,
     Some range for dynamically allocated handles.  */
} omp_allocator_handle_t;

typedef enum omp_alloctrait_key_t {
  OMP_ATK_SYNC_HINT = 1,
  OMP_ATK_ALIGNMENT = 2,
  OMP_ATK_ACCESS = 3,
  OMP_ATK_POOL_SIZE = 4,
  OMP_ATK_FALLBACK = 5,
  OMP_ATK_FB_DATA = 6,
  OMP_ATK_PINNED = 7,
  OMP_ATK_PARTITION = 8
} omp_alloctrait_key_t;

typedef enum omp_alloctrait_value_t {
  OMP_ATV_FALSE = 0,
  OMP_ATV_TRUE = 1,
  OMP_ATV_DEFAULT = 2,
  OMP_ATV_CONTENDED = 3,
  OMP_ATV_UNCONTENDED = 4,
  OMP_ATV_SEQUENTIAL = 5,
  OMP_ATV_PRIVATE = 6,
  OMP_ATV_ALL = 7,
  OMP_ATV_THREAD = 8,
  OMP_ATV_PTEAM = 9,
  OMP_ATV_CGROUP = 10,
  OMP_ATV_DEFAULT_MEM_FB = 11,
  OMP_ATV_NULL_FB = 12,
  OMP_ATV_ABORT_FB = 13,
  OMP_ATV_ALLOCATOR_FB = 14,
  OMP_ATV_ENVIRONMENT = 15,
  OMP_ATV_NEAREST = 16,
  OMP_ATV_BLOCKED = 17,
  OMP_ATV_INTERLEAVED = 18
} omp_alloctrait_value_t;

typedef struct omp_alloctrait_t {
  omp_alloctrait_key_t key;
  omp_uintptr_t value;
} omp_alloctrait_t;

/*
 * define kinds of relinguishing resources
 */
typedef enum omp_pause_resource_t {
  omp_pause_soft = 1,
  omp_pause_hard = 2
} omp_pause_resource_t;

typedef enum omp_event_handle_t {
  /* Vendor specific enumerators, e.g.:  */
  __omp_event_min = 0,
  __omp_event_max = ~0u
} omp_event_handle_t;

/*
 * define the tool control commands
 */
typedef enum omp_control_tool_t
{
  omp_control_tool_start = 1,
  omp_control_tool_pause = 2,
  omp_control_tool_flush = 3,
  omp_control_tool_end = 4
} omp_control_tool_t;

typedef enum omp_control_tool_result_t {
  omp_control_tool_notool = -2,
  omp_control_tool_nocallback = -1,
  omp_control_tool_success = 0,
  omp_control_tool_ignored = 1
} omp_control_tool_result_t;

/*
 * exported OpenMP functions
 */
#ifdef __cplusplus
extern "C"
{
#endif

extern void omp_set_num_threads(int num_threads);
extern int omp_get_num_threads(void);
extern int omp_get_max_threads(void);
extern int omp_get_thread_num(void);
extern int omp_get_num_procs(void);
extern int omp_in_parallel(void);
extern void omp_set_dynamic(int dynamic_threads);
extern int omp_get_dynamic(void);
extern int omp_get_cancellation(void);
extern void omp_set_nested(int nested);
extern int omp_get_nested(void);
extern void omp_set_schedule(omp_sched_t kind, int chunk_size);
extern void omp_get_schedule(omp_sched_t *kind, int *chunk_size);
extern int omp_get_thread_limit(void);
extern int omp_get_supported_active_levels(void);
extern void omp_set_max_active_levels(int max_active_levels);
extern int omp_get_max_active_levels(void);
extern int omp_get_level(void);
extern int omp_get_ancestor_thread_num(int level);
extern int omp_get_team_size(int level);
extern int omp_get_active_level(void);
extern int omp_in_final(void);
extern omp_proc_bind_t omp_get_proc_bind(void);
extern int omp_get_num_places(void);
extern int omp_get_place_num_procs(int place_num);
extern void omp_get_place_proc_ids(int place_num, int *ids);
extern int omp_get_place_num(void);
extern int omp_get_partition_num_places(void);
extern void omp_get_partition_place_nums(int *place_nums);

extern void omp_set_affinity_format(const char *format);
extern size_t omp_get_affinity_format(char *buffer, size_t size);
extern void omp_display_affinity(const char *format);
extern size_t omp_capture_affinity(char *buffer, size_t size, const char *format);

extern void omp_set_default_device(int device_num);
extern int omp_get_default_device(void);

extern int omp_get_num_devices(void);
extern int omp_get_device_num(void);
extern int omp_get_num_teams(void);
extern int omp_get_team_num(void);
extern int omp_is_initial_device(void);
extern int omp_get_initial_device(void);
extern int omp_get_max_task_priority(void);
extern int omp_pause_resource(omp_pause_resource_t kind, int device_num);
extern int omp_pause_resource_all(omp_pause_resource_t kind);

extern void omp_init_lock(omp_lock_t *lock);
extern void omp_init_lock_with_hint(
  omp_lock_t *lock,
  omp_sync_hint_t hint
);
extern void omp_destroy_lock(omp_lock_t *lock);
extern void omp_set_lock(omp_lock_t *lock);
extern void omp_unset_lock(omp_lock_t *lock);
extern int omp_test_lock(omp_lock_t *lock);

extern void omp_init_nest_lock(omp_nest_lock_t *lock);
extern void omp_init_nest_lock_with_hint(
  omp_nest_lock_t *lock,
  omp_sync_hint_t hint
);
extern void omp_destroy_nest_lock(omp_nest_lock_t *lock);
extern void omp_set_nest_lock(omp_nest_lock_t *lock);
extern void omp_unset_nest_lock(omp_nest_lock_t *lock);
extern int omp_test_nest_lock(omp_nest_lock_t *lock);

extern double omp_get_wtime(void);
extern double omp_get_wtick(void);

extern void omp_fulfill_event(omp_event_handle_t event);

extern void *omp_target_alloc(size_t size, int device_num);
extern void omp_target_free(void *device_ptr, int device_num);
extern int omp_target_is_present(const void *ptr, int device_num);
extern int omp_target_memcpy(
  void *dst,
  const void *src,
  size_t length,
  size_t dst_offset,
  size_t src_offset,
  int dst_device_num,
  int src_device_num
);
extern int omp_target_memcpy_rect(
  void *dst,
  const void *src,
  size_t element_size,
  int num_dims,
  const size_t *volume,
  const size_t *dst_offsets,
  const size_t *src_offsets,
  const size_t *dst_dimensions,
  const size_t *src_dimensions,
  int dst_device_num,
  int src_device_num
);
extern int omp_target_associate_ptr(
  const void *host_ptr,
  const void *device_ptr,
  size_t size,
  size_t device_offset,
  int device_num
);
extern int omp_target_disassociate_ptr(
  const void *ptr,
  int device_num
);

extern omp_allocator_handle_t omp_init_allocator(
  omp_memspace_handle_t memspace,
  int ntraits,
  const omp_alloctrait_t traits[]
);
extern void omp_destroy_allocator(omp_allocator_handle_t allocator);
extern void omp_set_default_allocator(omp_allocator_handle_t allocator);
extern omp_allocator_handle_t omp_get_default_allocator(void);

#ifdef __cplusplus
extern void *omp_alloc(
  size_t size,
  omp_allocator_handle_t allocator = OMP_NULL_ALLOCATOR
);
extern void omp_free(
  void *ptr,
  omp_allocator_handle_t allocator = OMP_NULL_ALLOCATOR
);
#else
extern void *omp_alloc(size_t size, omp_allocator_handle_t allocator);
extern void omp_free(void *ptr, omp_allocator_handle_t allocator);
#endif

extern void omp_control_tool(int command, int modifier, void *arg);

#ifdef __cplusplus
}
#endif

#endif
\end{ompcFunction}} % end of \small block

%\pagebreak

{\hyphenpenalty=10000\section{Example of an Interface Declaration \hcode{include} File}}
\label{sec:Example of an Interface Declaration include File}
\emph{omp\_lib\_kinds.h:}
{\small \begin{ompfSyntax}

     integer omp_lock_kind
     integer omp_nest_lock_kind
     integer omp_control_tool_kind
     integer omp_control_tool_result_kind
! this selects an integer that is large enough to hold a 64 bit integer
     parameter ( omp_lock_kind = selected_int_kind( 10 ) )
     parameter ( omp_nest_lock_kind = selected_int_kind( 10 ) )

     integer omp_sched_kind
! this selects an integer that is large enough to hold a 32 bit integer
     parameter ( omp_sched_kind = selected_int_kind( 8 ) )
     integer ( omp_sched_kind ) omp_sched_static
     parameter ( omp_sched_static = 1 )
     integer ( omp_sched_kind ) omp_sched_dynamic
     parameter ( omp_sched_dynamic = 2 )
     integer ( omp_sched_kind ) omp_sched_guided
     parameter ( omp_sched_guided = 3 )
     integer ( omp_sched_kind ) omp_sched_auto
     parameter ( omp_sched_auto = 4 )

     integer omp_proc_bind_kind
     parameter ( omp_proc_bind_kind = selected_int_kind( 8 ) )
     integer ( omp_proc_bind_kind ) omp_proc_bind_false
     parameter ( omp_proc_bind_false = 0 )
     integer ( omp_proc_bind_kind ) omp_proc_bind_true
     parameter ( omp_proc_bind_true = 1 )
     integer ( omp_proc_bind_kind ) omp_proc_bind_master
     parameter ( omp_proc_bind_master = 2 )
     integer ( omp_proc_bind_kind ) omp_proc_bind_close
     parameter ( omp_proc_bind_close = 3 )
     integer ( omp_proc_bind_kind ) omp_proc_bind_spread
     parameter ( omp_proc_bind_spread = 4 )
     integer omp_sync_hint_kind
     parameter ( omp_sync_hint_kind = selected_int_kind( 10 ) )
     integer omp_lock_hint_kind
     parameter ( omp_lock_hint_kind = omp_sync_hint_kind )
     integer ( omp_sync_hint_kind) omp_sync_hint_none
     parameter ( omp_sync_hint_none = 0x0 )
     integer ( omp_lock_hint_kind) omp_lock_hint_none
     parameter ( omp_lock_hint_none = omp_sync_hint_none )
     integer ( omp_sync_hint_kind) omp_sync_hint_uncontended
     parameter ( omp_sync_hint_uncontended = 0x1 )
     integer ( omp_lock_hint_kind) omp_lock_hint_uncontended
     parameter ( omp_lock_hint_uncontended = omp_sync_hint_uncontended )
     integer ( omp_sync_hint_kind) omp_sync_hint_contended
     parameter ( omp_sync_hint_contended = 0x2 )
     integer ( omp_lock_hint_kind) omp_lock_hint_contended
     parameter ( omp_lock_hint_contended = omp_sync_hint_contended )
     integer ( omp_sync_hint_kind) omp_sync_hint_nonspeculative
     parameter ( omp_sync_hint_nonspeculative = 0x4 )
     integer ( omp_lock_hint_kind) omp_lock_hint_nonspeculative
     parameter ( omp_lock_hint_nonspeculative = omp_sync_hint_nonspeculative )
     integer ( omp_sync_hint_kind) omp_sync_hint_speculative
     parameter ( omp_sync_hint_speculative = 0x8 )
     integer ( omp_lock_hint_kind) omp_lock_hint_speculative
     parameter ( omp_lock_hint_speculative = omp_sync_hint_speculative )
     parameter ( omp_control_tool_kind = selected_int_kind( 8 ) )
     integer ( omp_control_tool_kind ) omp_control_tool_start
     parameter ( omp_control_tool_start = 1 )
     integer ( omp_control_tool_kind ) omp_control_tool_pause
     parameter ( omp_control_tool_pause = 2 )
     integer ( omp_control_tool_kind ) omp_control_tool_flush
     parameter ( omp_control_tool_flush = 3 )
     integer ( omp_control_tool_kind ) omp_control_tool_end
     parameter ( omp_control_tool_end = 4 )
     parameter ( omp_control_tool_result_kind = selected_int_kind( 8 ) )
     integer ( omp_control_tool_result_kind ) omp_control_tool_notool
     parameter ( omp_control_tool_notool = -2 )
     integer ( omp_control_tool_result_kind ) omp_control_tool_nocallback
     parameter ( omp_control_tool_nocallback = -1 )
     integer ( omp_control_tool_result_kind ) omp_control_tool_success
     parameter ( omp_control_tool_success = 0 )
     integer ( omp_control_tool_result_kind ) omp_control_tool_ignored
     parameter ( omp_control_tool_ignored = 1 )
     integer omp_allocator_kind
     parameter ( omp_allocator_kind = selected_int_kind( 8 ) )
     integer ( omp_allocator_kind ) omp_null_allocator
     parameter ( omp_null_allocator = 0 )
     integer ( omp_allocator_kind ) omp_default_mem_alloc
     parameter ( omp_default_mem_alloc = 1 )
     integer ( omp_allocator_kind ) omp_large_cap_mem_alloc
     parameter ( omp_large_cap_mem_alloc = 2 )
     integer ( omp_allocator_kind ) omp_const_mem_alloc
     parameter ( omp_const_mem_alloc = 3 )
     integer ( omp_allocator_kind ) omp_high_bw_mem_alloc
     parameter ( omp_high_bw_mem_alloc = 4 )
     integer ( omp_allocator_kind ) omp_low_lat_mem_alloc
     parameter ( omp_low_lat_mem_alloc = 5 )
     integer ( omp_allocator_kind ) omp_cgroup_mem_alloc
     parameter ( omp_cgroup_mem_alloc = 6 )
     integer ( omp_allocator_kind ) omp_pteam_mem_alloc
     parameter ( omp_pteam_mem_alloc = 7 )
     integer ( omp_allocator_kind ) omp_thread_mem_alloc
     parameter ( omp_thread_mem_alloc = 8 )
\end{ompfSyntax}}

\emph{omp\_lib.h:}

{\small \begin{ompfSyntax}
! default integer type assumed below
! default logical type assumed below
! OpenMP API v5.0 Preview 2 (TR6)

     include 'omp_lib_kinds.h'
     integer openmp_version
     parameter ( openmp_version = 201811 )

     external omp_set_num_threads
     external omp_get_num_threads
     integer omp_get_num_threads
     external omp_get_max_threads
     integer omp_get_max_threads
     external omp_get_thread_num
     integer omp_get_thread_num
     external omp_get_num_procs
     integer omp_get_num_procs
     external omp_in_parallel
     logical omp_in_parallel
     external omp_set_dynamic
     external omp_get_dynamic
     logical omp_get_dynamic
     external omp_get_cancellation
     logical omp_get_cancellation
     external omp_set_nested
     external omp_get_nested
     logical omp_get_nested
     external omp_set_schedule
     external omp_get_schedule
     external omp_get_thread_limit
     integer omp_get_thread_limit
     external omp_set_max_active_levels
     external omp_get_max_active_levels
     integer omp_get_max_active_levels
     external omp_get_level
     integer omp_get_level
     external omp_get_ancestor_thread_num
     integer omp_get_ancestor_thread_num
     external omp_get_team_size
     integer omp_get_team_size
     external omp_get_active_level
     integer omp_get_active_level
     external omp_set_affinity_format
     external omp_get_affinity_format
     integer omp_get_affinity_format
     external omp_display_affinity
     external omp_capture_affinity
     integer omp_capture_affinity
     external omp_set_default_device
     external omp_get_default_device
     integer omp_get_default_device
     external omp_get_num_devices
     integer omp_get_num_devices
     external omp_get_device_num
     integer omp_get_device_num
     external omp_get_num_teams
     integer omp_get_num_teams
     external omp_get_team_num
     integer omp_get_team_num
     external omp_is_initial_device
     logical omp_is_initial_device
     external omp_get_initial_device
     integer omp_get_initial_device
     external omp_get_max_task_priority
     integer omp_get_max_task_priority

     external omp_in_final
     logical omp_in_final

     integer ( omp_proc_bind_kind ) omp_get_proc_bind
     external omp_get_proc_bind
     integer omp_get_num_places
     external omp_get_num_places
     integer omp_get_place_num_procs
     external omp_get_place_num_procs
     external omp_get_place_proc_ids
     integer omp_get_place_num
     external omp_get_place_num
     integer omp_get_partition_num_places
     external omp_get_partition_num_places
     external omp_get_partition_place_nums

     external omp_init_lock
     external omp_init_lock_with_hint
     external omp_destroy_lock
     external omp_set_lock
     external omp_unset_lock
     external omp_test_lock
     logical omp_test_lock

     external omp_init_nest_lock
     external omp_init_nest_lock_with_hint
     external omp_destroy_nest_lock
     external omp_set_nest_lock
     external omp_unset_nest_lock
     external omp_test_nest_lock
     integer omp_test_nest_lock

     external omp_get_wtick
     double precision omp_get_wtick
     external omp_get_wtime
     double precision omp_get_wtime

     integer  omp_control_tool
     external omp_control_tool

     external omp_set_default_allocator
     external omp_get_default_allocator
     integer ( omp_allocator_kind ) omp_get_default_allocator

\end{ompfSyntax}}





%\pagebreak
\section{Example of a Fortran Interface Declaration \hcode{module}}
\label{sec:Example of a Fortran Interface Declaration module}
{\small \begin{ompfFunction}
!      the "!" of this comment starts in column 1
!23456

        module omp_lib_kinds
        integer, parameter :: omp_lock_kind = selected_int_kind( 10 )
        integer, parameter :: omp_nest_lock_kind = selected_int_kind( 10 )
        integer, parameter :: omp_sync_hint_kind = selected_int_kind( 10 )
        integer, parameter :: omp_lock_hint_kind = selected_int_kind( 10 )

        integer (kind=omp_sync_hint_kind), parameter ::
      &   omp_sync_hint_none = 0x0
        integer (kind=omp_lock_hint_kind), parameter ::
      &   omp_lock_hint_none = omp_sync_hint_none
        integer (kind=omp_sync_hint_kind), parameter ::
      &   omp_sync_hint_uncontended = 0x1
        integer (kind=omp_lock_hint_kind), parameter ::
      &   omp_lock_hint_uncontended = omp_sync_hint_uncontended
        integer (kind=omp_sync_hint_kind), parameter ::
      &   omp_sync_hint_contended = 0x2
        integer (kind=omp_lock_hint_kind), parameter ::
      &   omp_lock_hint_contended = omp_sync_hint_contended
        integer (kind=omp_sync_hint_kind), parameter ::
      &   omp_sync_hint_nonspeculative = 0x4
        integer (kind=omp_lock_hint_kind), parameter ::
      &   omp_lock_hint_nonspeculative = omp_sync_hint_nonspeculative
        integer (kind=omp_sync_hint_kind), parameter ::
      &   omp_sync_hint_speculative = 0x8
        integer (kind=omp_lock_hint_kind), parameter ::
      &   omp_lock_hint_speculative = omp_sync_hint_speculative

        integer, parameter :: omp_sched_kind = selected_int_kind( 8 )
        integer(kind=omp_sched_kind), parameter ::
      &   omp_sched_static = 1
        integer(kind=omp_sched_kind), parameter ::
      &   omp_sched_dynamic = 2
        integer(kind=omp_sched_kind), parameter ::
      &   omp_sched_guided = 3
        integer(kind=omp_sched_kind), parameter ::
      &   omp_sched_auto = 4

        integer, parameter :: omp_proc_bind_kind = selected_int_kind( 8 )
        integer (kind=omp_proc_bind_kind), parameter ::
      &   omp_proc_bind_false = 0
        integer (kind=omp_proc_bind_kind), parameter ::
      &   omp_proc_bind_true = 1
        integer (kind=omp_proc_bind_kind), parameter ::
      &   omp_proc_bind_master = 2
        integer (kind=omp_proc_bind_kind), parameter ::
      &   omp_proc_bind_close = 3
        integer (kind=omp_proc_bind_kind), parameter ::
      &   omp_proc_bind_spread = 4
        integer, parameter :: omp_control_tool_kind = selected_int_kind( 8 )
        integer (kind=omp_control_tool_kind), parameter ::
      &   omp_control_tool_start = 1
        integer (kind=omp_control_tool_kind), parameter ::
      &   omp_control_tool_pause = 2
        integer (kind=omp_control_tool_kind), parameter ::
      &   omp_control_tool_flush = 3
        integer (kind=omp_control_tool_kind), parameter ::
      &   omp_control_tool_end = 4
        end module omp_lib_kinds
        integer, parameter :: omp_control_tool_result_kind =
      &   selected_int_kind( 8 )
        integer ( omp_control_tool_result_kind ), parameter ::
      &   omp_control_tool_notool = -2
        integer ( omp_control_tool_result_kind ), parameter ::
      &   omp_control_tool_nocallback = -1
        integer ( omp_control_tool_result_kind ), parameter ::
      &   omp_control_tool_success = 0
        integer ( omp_control_tool_result_kind ), parameter ::
      &   omp_control_tool_ignored = 1
        integer, pamameter :: omp_allocator_kind =
      &  selected_int_kind( 8 )
        integer ( omp_allocator_kind ), parameter ::
      & omp_null_allocator = 0
        integer ( omp_allocator_kind ), parameter ::
      & omp_default_mem_alloc = 1
        integer ( omp_allocator_kind ), parameter ::
      & omp_large_cap_mem_alloc = 2
        integer ( omp_allocator_kind ), parameter ::
      & omp_const_mem_alloc = 3
        integer ( omp_allocator_kind ), parameter ::
      & omp_high_bw_mem_alloc = 4
        integer ( omp_allocator_kind ), parameter ::
      & omp_low_lat_mem_alloc = 5
        integer ( omp_allocator_kind ), parameter ::
      & omp_cgroup_mem_alloc = 6
        integer ( omp_allocator_kind ), parameter ::
      & omp_pteam_mem_alloc = 7
        integer ( omp_allocator_kind ), parameter ::
      & omp_thread_mem_alloc = 8

        module omp_lib

          use omp_lib_kinds

!                                     OpenMP API v5.0 Preview 2 (TR6)
          integer, parameter :: openmp_version = 201811

         interface

          subroutine omp_set_num_threads (num_threads)
           integer, intent(in) :: num_threads
          end subroutine omp_set_num_threads

          function omp_get_num_threads ()
           integer :: omp_get_num_threads
          end function omp_get_num_threads

          function omp_get_max_threads ()
           integer :: omp_get_max_threads
          end function omp_get_max_threads

          function omp_get_thread_num ()
           integer :: omp_get_thread_num
          end function omp_get_thread_num

          function omp_get_num_procs ()
           integer :: omp_get_num_procs
          end function omp_get_num_procs

          function omp_in_parallel ()
           logical :: omp_in_parallel
          end function omp_in_parallel

          subroutine omp_set_dynamic (dynamic_threads)
           logical, intent(in) :: dynamic_threads
          end subroutine omp_set_dynamic

          function omp_get_dynamic ()
           logical :: omp_get_dynamic
          end function omp_get_dynamic

          function omp_get_cancellation ()
           logical :: omp_get_cancellation
          end function omp_get_cancellation

          subroutine omp_set_nested (nested)
           logical, intent(in) :: nested
          end subroutine omp_set_nested

          function omp_get_nested ()
           logical :: omp_get_nested
          end function omp_get_nested

          subroutine omp_set_schedule (kind, chunk_size)
           use omp_lib_kinds
           integer(kind=omp_sched_kind), intent(in) :: kind
           integer, intent(in) :: chunk_size
          end subroutine omp_set_schedule

          subroutine omp_get_schedule (kind, chunk_size)
           use omp_lib_kinds
           integer(kind=omp_sched_kind), intent(out) :: kind
           integer, intent(out) :: chunk_size
          end subroutine omp_get_schedule

          function omp_get_thread_limit ()
           integer :: omp_get_thread_limit
          end function omp_get_thread_limit

          subroutine omp_set_max_active_levels (max_levels)
           integer, intent(in) :: max_levels
          end subroutine omp_set_max_active_levels

          function omp_get_max_active_levels ()
           integer :: omp_get_max_active_levels
          end function omp_get_max_active_levels

          function omp_get_level ()
           integer :: omp_get_level
          end function omp_get_level

          function omp_get_ancestor_thread_num (level)
           integer, intent(in) :: level
           integer :: omp_get_ancestor_thread_num
          end function omp_get_ancestor_thread_num

          function omp_get_team_size (level)
           integer, intent(in) :: level
           integer :: omp_get_team_size
          end function omp_get_team_size

          function omp_get_active_level ()
           integer :: omp_get_active_level
          end function omp_get_active_level

          function omp_in_final ()
           logical :: omp_in_final
          end function omp_in_final

          function omp_get_proc_bind ()
           use omp_lib_kinds
           integer(kind=omp_proc_bind_kind) :: omp_get_proc_bind
           omp_get_proc_bind = omp_proc_bind_false
          end function omp_get_proc_bind

          function omp_get_num_places ()
           integer :: omp_get_num_places
          end function omp_get_num_places

          function omp_get_place_num_procs (place_num)
           integer, intent(in) :: place_num
           integer :: omp_get_place_num_procs
          end function omp_get_place_num_procs

          subroutine omp_get_place_proc_ids (place_num, ids)
           integer, intent(in) :: place_num
           integer, intent(out) :: ids(*)
          end subroutine omp_get_place_proc_ids

          function omp_get_place_num ()
           integer :: omp_get_place_num
          end function omp_get_place_num

          function omp_get_partition_num_places ()
           integer :: omp_get_partition_num_places
          end function omp_get_partition_num_places

          subroutine omp_get_partition_place_nums (place_nums)
           integer, intent(out) :: place_nums(*)
          end subroutine omp_get_partition_place_nums

          subroutine omp_set_affinity_format (format)
           character(len=*), intent(in) :: format
          end subroutine omp_set_affinity_format

          function omp_get_affinity_format (buffer)
           character(len=*), intent(out) :: buffer
           integer :: omp_get_affinity_format
          end function omp_get_affinity_format

          subroutine omp_display_affinity (format)
           character(len=*), intent(in) :: format
          end subroutine omp_display_affinity

          function omp_capture_affinity (buffer, format)
           character(len=*), intent(out) :: buffer
           character(len=*), intent(in) :: format
           integer :: omp_capture_affinity
          end function omp_capture_affinity

          subroutine omp_set_default_device (device_num)
           integer :: device_num
          end subroutine omp_set_default_device

          function omp_get_default_device ()
           integer :: omp_get_default_device
          end function omp_get_default_device

          function omp_get_num_devices ()
           integer :: omp_get_num_devices
          end function omp_get_num_devices

          function omp_get_device_num ()
           integer :: omp_get_device_num
          end function omp_get_device_num

          function omp_get_num_teams ()
           integer :: omp_get_num_teams
          end function omp_get_num_teams

          function omp_get_team_num ()
           integer :: omp_get_team_num
          end function omp_get_team_num

          function omp_is_initial_device ()
           logical :: omp_is_initial_device
          end function omp_is_initial_device

          function omp_get_initial_device ()
           integer :: omp_get_initial_device
          end function omp_get_initial_device

          function omp_get_max_task_priority ()
           integer :: omp_get_max_task_priority
          end function omp_get_max_task_priority

          subroutine omp_init_lock (svar)
           use omp_lib_kinds
           integer(kind=omp_lock_kind), intent(out) :: svar
          end subroutine omp_init_lock

          subroutine omp_init_lock_with_hint (svar, hint)
           use omp_lib_kinds
           integer(kind=omp_lock_kind), intent(out) :: svar
           integer(kind=omp_sync_hint_kind), intent(in) :: hint
          end subroutine omp_init_lock_with_hint

          subroutine omp_destroy_lock (svar)
           use omp_lib_kinds
           integer(kind=omp_lock_kind), intent(inout) :: svar
          end subroutine omp_destroy_lock

          subroutine omp_set_lock (svar)
           use omp_lib_kinds
           integer(kind=omp_lock_kind), intent(inout) :: svar
          end subroutine omp_set_lock

          subroutine omp_unset_lock (svar)
           use omp_lib_kinds
           integer(kind=omp_lock_kind), intent(inout) :: svar
          end subroutine omp_unset_lock

          function omp_test_lock (svar)
           use omp_lib_kinds
           logical :: omp_test_lock
           integer(kind=omp_lock_kind), intent(inout) :: svar
          end function omp_test_lock

          subroutine omp_init_nest_lock (nvar)
           use omp_lib_kinds
           integer(kind=omp_nest_lock_kind), intent(out) :: nvar
          end subroutine omp_init_nest_lock

          subroutine omp_init_nest_lock_with_hint (nvar, hint)
           use omp_lib_kinds
           integer(kind=omp_nest_lock_kind), intent(out) :: nvar
           integer(kind=omp_sync_hint_kind), intent(in) :: hint
          end subroutine omp_init_nest_lock_with_hint

          subroutine omp_destroy_nest_lock (nvar)
           use omp_lib_kinds
           integer(kind=omp_nest_lock_kind), intent(inout) :: nvar
          end subroutine omp_destroy_nest_lock

          subroutine omp_set_nest_lock (nvar)
           use omp_lib_kinds
           integer(kind=omp_nest_lock_kind), intent(inout) :: nvar
          end subroutine omp_set_nest_lock

          subroutine omp_unset_nest_lock (nvar)
           use omp_lib_kinds
           integer(kind=omp_nest_lock_kind), intent(inout) :: nvar
          end subroutine omp_unset_nest_lock

          function omp_test_nest_lock (nvar)
           use omp_lib_kinds
           integer :: omp_test_nest_lock
           integer(kind=omp_nest_lock_kind), intent(inout) :: nvar
          end function omp_test_nest_lock

          function omp_get_wtick ()
           double precision :: omp_get_wtick
          end function omp_get_wtick

          function omp_get_wtime ()
           double precision :: omp_get_wtime
          end function omp_get_wtime
          function omp_control_tool (command, modifier)
           use omp_lib_kinds
           integer :: omp_control_tool
           integer(kind=omp_control_tool_kind), intent(in) :: command
           integer(kind=omp_control_tool_kind), intent(in) :: modifier
          end function omp_control_tool

          subroutine omp_set_default_allocator (svar)
           use omp_lib_kinds
           integer(kind=omp_allocator_kind), intent(in) :: svar
          end subroutine omp_set_default_allocator

          function omp_get_default_allocator ()
           use omp_lib_kinds
           integer(kind=omp_allocator_kind) :: omp_get_default_allocator
          end function omp_get_default_allocator

          end interface

        end module omp_lib
\end{ompfFunction}} % end of \small block






%\pagebreak
\section{Example of a Generic Interface for a Library Routine}
\label{sec:Example of a Generic Interface for a Library Routine}
Any of the OpenMP runtime library routines that take an argument may be extended
with a generic interface so arguments of different \code{KIND} type can be accommodated.

The \code{OMP_SET_NUM_THREADS} interface could be specified in the \code{omp_lib} module
as follows:

\begin{ompfSubroutine}
interface omp_set_num_threads

    subroutine omp_set_num_threads_4 (num_threads)
      use omp_lib_kinds
      integer(4), intent(in) :: num_threads
    end subroutine omp_set_num_threads_4

    subroutine omp_set_num_threads_8 (num_threads)
      use omp_lib_kinds
      integer(8), intent(in) :: num_threads
    end subroutine omp_set_num_threads_8

end interface omp_set_num_threads
\end{ompfSubroutine}

% This is the end of appendix-C-InterfaceDeclarations.tex

