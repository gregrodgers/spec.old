% This is an included file. See the master file for more information.
%
% When editing this file:
%
%    1. To change formatting, appearance, or style, please edit openmp.sty.
%
%    2. Custom commands and macros are defined in openmp.sty.
%
%    3. Be kind to other editors -- keep a consistent style by copying-and-pasting to
%       create new content.
%
%    4. We use semantic markup, e.g. (see openmp.sty for a full list):
%         \code{}     % for bold monospace keywords, code, operators, etc.
%         \plc{}      % for italic placeholder names, grammar, etc.
%
%    5. There are environments that provide special formatting, e.g. language bars.
%       Please use them whereever appropriate.  Examples are:
%
%         \begin{fortranspecific}
%         This is text that appears enclosed in blue language bars for Fortran.
%         \end{fortranspecific}
%
%         \begin{note}
%         This is a note.  The "Note -- " header appears automatically.
%         \end{note}
%
%    6. Other recommendations:
%         Use the convenience macros defined in openmp.sty for the minor headers
%         such as Comments, Syntax, etc.
%
%         To keep items together on the same page, prefer the use of
%         \begin{samepage}.... Avoid \parbox for text blocks as it interrupts line numbering.
%         When possible, avoid \filbreak, \pagebreak, \newpage, \clearpage unless that's
%         what you mean. Use \needspace{} cautiously for troublesome paragraphs.
%
%         Avoid absolute lengths and measures in this file; use relative units when possible.
%         Vertical space can be relative to \baselineskip or ex units. Horizontal space
%         can be relative to \linewidth or em units.
%
%         Prefer \emph{} to italicize terminology, e.g.:
%             This is a \emph{definition}, not a placeholder.
%             This is a \plc{var-name}.
%


\section{Combined Constructs}
\label{sec:Combined Constructs}
\index{combined constructs}
\index{constructs!combined constructs}
Combined constructs are shortcuts for specifying one construct immediately nested
inside another construct. The semantics of the combined constructs are identical to that
of explicitly specifying the first construct containing one instance of the second
construct and no other statements.

For combined constructs, tool callbacks shall be invoked as if the constructs were
explicitly nested.






\subsection{Parallel Worksharing-Loop Construct}
\label{subsec:Parallel Worksharing-Loop Construct}
\index{parallel worksharing-loop construct}
\index{constructs!parallel worksharing-loop construct}
\index{constructs!parallel for@{\code{parallel}~\code{for} \emph{C/C++}}}
\index{constructs!parallel do@{\code{parallel}~\code{do} \emph{Fortran}}}
\index{combined constructs!parallel worksharing-loop construct}
\index{worksharing!parallel}
\summary
The parallel worksharing-loop construct is a shortcut for specifying a \code{parallel} construct
containing one worksharing-loop construct with one or more associated loops and no other statements.



\syntax
\begin{ccppspecific}
The syntax of the parallel worksharing-loop construct is as follows:

\begin{ompcPragma}
#pragma omp parallel for \plc{[clause[ [},\plc{] clause] ... ] new-line}
   \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or \code{for} directives,
except the \code{nowait} clause, with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the parallel worksharing-loop construct is as follows:

\begin{ompfPragma}
!$omp parallel do \plc{[clause[ [},\plc{] clause] ... ]}
   \plc{do-loops}
\plc{[}!$omp end parallel do\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or \code{do} directives,
with identical meanings and restrictions.

If an \code{end}~\code{parallel}~\code{do} directive is not specified, an \code{end}~\code{parallel}~\code{do} directive is
assumed at the end of the \plc{do-loops}. \code{nowait} may not be specified on an
\code{end}~\code{parallel}~\code{do} directive.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{parallel} directive immediately
followed by a worksharing-loop directive.

\restrictions
\begin{itemize}
\item The restrictions for the \code{parallel} construct and the
    worksharing-loop construct apply.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item worksharing-loop SIMD construct, see
\specref{subsubsec:Worksharing-Loop SIMD Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}




\subsection{Parallel Loop Construct}
\label{subsec:Parallel Loop Construct}
\index{parallel loop construct}
\index{constructs!parallel loop construct}
\index{combined constructs!parallel loop construct}
\index{worksharing!parallel}
\summary
The parallel loop construct is a shortcut for specifying a \code{parallel} construct
containing one \code{loop} construct with one or more associated loops and no other statements.



\syntax
\begin{ccppspecific}
The syntax of the parallel loop construct is as follows:

\begin{ompcPragma}
#pragma omp parallel loop \plc{[clause[ [},\plc{] clause] ... ] new-line}
   \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or
  \code{loop} directives, with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the parallel loop construct is as follows:

\begin{ompfPragma}
!$omp parallel loop \plc{[clause[ [},\plc{] clause] ... ]}
   \plc{do-loops}
\plc{[}!$omp end parallel loop\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or
  \code{loop} directives, with identical meanings and restrictions.

If an \code{end}~\code{parallel}~\code{loop} directive is not specified, an
  \code{end}~\code{parallel}~\code{loop} directive is assumed at the end of the
  \plc{do-loops}. \code{nowait} may not be specified on an
  \code{end}~\code{parallel}~\code{loop} directive.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{parallel} directive immediately
followed by a \code{loop} directive. 


\restrictions
\begin{itemize}
\item The restrictions for the \code{parallel} construct and the
  \code{loop} construct apply.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item \code{loop} construct, see
\specref{subsec:loop Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}




\subsection{\hcode{parallel}~\hcode{sections} Construct}
\index{parallel sections@{\code{parallel}~\code{sections}}}
\index{constructs!parallel sections@{\code{parallel}~\code{sections}}}
\index{combined constructs!parallel sections@{\code{parallel}~\code{sections}}}
\label{subsec:parallel sections Construct}
\summary
The \code{parallel}~\code{sections} construct is a shortcut for specifying a \code{parallel}
construct containing one \code{sections} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{parallel}~\code{sections} construct is as follows:

\begin{ompcPragma}
#pragma omp parallel sections \plc{[clause[ [},\plc{] clause] ... ] new-line}
    {
    \plc{[}#pragma omp section \plc{new-line]}
        \plc{structured-block}
    \plc{[}#pragma omp section \plc{new-line}
        \plc{structured-block]}
    \plc{...}
    }
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or \code{sections}
directives, except the \code{nowait} clause, with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{parallel}~\code{sections} construct is as follows:

\begin{ompfPragma}
!$omp parallel sections \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{[}!$omp section\plc{]}
        \plc{structured-block}
    \plc{[}!$omp section
        \plc{structured-block]}
    \plc{...}
!$omp end parallel sections
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} or \code{sections}
directives, with identical meanings and restrictions.

The last section ends at the \code{end}~\code{parallel}~\code{sections} directive. \code{nowait} cannot be
specified on an \code{end}~\code{parallel}~\code{sections} directive.
\end{fortranspecific}

\descr
\begin{ccppspecific}
The semantics are identical to explicitly specifying a \code{parallel} directive immediately
followed by a \code{sections} directive.
\end{ccppspecific}

\begin{fortranspecific}
The semantics are identical to explicitly specifying a \code{parallel} directive immediately
followed by a \code{sections} directive, and an \code{end}~\code{sections} directive immediately
followed by an \code{end}~\code{parallel} directive.
\end{fortranspecific}

\restrictions
The restrictions for the \code{parallel} construct and the \code{sections} construct apply.

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item \code{sections} construct, see
\specref{subsec:sections Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}









% Here we need to force the blue floater down lower and force the subsection
% header higher to reduce the space between the blue floater and the header,
% as per Richard:

\begin{fortranspecific}

\subsection{\hcode{parallel}~\hcode{workshare} Construct}
\index{parallel workshare@{\code{parallel}~\code{workshare}}}
\index{constructs!parallel workshare@{\code{parallel}~\code{workshare}}}
\index{combined constructs!parallel workshare@{\code{parallel}~\code{workshare}}}
\label{subsec:parallel workshare Construct}
\summary
The \code{parallel}~\code{workshare} construct is a shortcut for specifying a \code{parallel}
construct containing one \code{workshare} construct and no other statements.

\syntax
The syntax of the \code{parallel}~\code{workshare} construct is as follows:

\begin{ompfPragma}
!$omp parallel workshare \plc{[clause[ [},\plc{] clause] ... ]}
   \plc{structured-block }
!$omp end parallel workshare
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel} directive, with
identical meanings and restrictions. \code{nowait} may not be specified on an
\code{end}~\code{parallel}~\code{workshare} directive.

\descr
The semantics are identical to explicitly specifying a \code{parallel} directive immediately
followed by a \code{workshare} directive, and an \code{end}~\code{workshare} directive immediately
followed by an \code{end}~\code{parallel} directive.

\restrictions
The restrictions for the \code{parallel} construct and the \code{workshare} construct apply.

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item \code{workshare} construct, see
\specref{subsec:workshare Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}
\end{fortranspecific}










\subsection{Parallel Worksharing-Loop SIMD Construct}
\label{subsec:Parallel Worksharing-Loop SIMD Construct}
\index{parallel worksharing-loop SIMD construct}
\index{constructs!parallel worksharing-loop SIMD construct}
\index{combined constructs!parallel worksharing-loop SIMD construct}
\summary
The parallel worksharing-loop SIMD construct is a shortcut for specifying a \code{parallel} construct
containing one worksharing-loop SIMD construct and no other statement.

\begin{samepage}
\syntax
\begin{ccppspecific}
The syntax of the parallel worksharing-loop SIMD construct is as follows:

\begin{ompcPragma}
#pragma omp parallel for simd \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{parallel}
or \code{for}~\code{simd} directives, except the \code{nowait} clause, with
identical meanings and restrictions.
\end{ccppspecific}
\end{samepage}

\begin{fortranspecific}
\begin{samepage}
The syntax of the parallel worksharing-loop SIMD construct is as follows:

\begin{ompfPragma}
!$omp parallel do simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end parallel do simd\plc{]}
\end{ompfPragma}
\end{samepage}

where \plc{clause} can be any of the clauses accepted by the \code{parallel}
or \code{do}~\code{simd} directives, with identical meanings and restrictions.

\begin{samepage}
If an \code{end}~\code{parallel}~\code{do}~\code{simd} directive is not specified, an
\code{end}~\code{parallel}~\code{do}~\code{simd} directive is assumed at the end of the
\plc{do-loops}. \code{nowait} may not be specified on
an \code{end}~\code{parallel}~\code{do}~\code{simd} directive.
\end{samepage}
\end{fortranspecific}

\descr
The semantics of the parallel worksharing-loop SIMD construct are identical to explicitly specifying
a \code{parallel} directive immediately followed by a worksharing-loop SIMD directive.

\restrictions
The restrictions for the \code{parallel} construct and the worksharing-loop SIMD construct apply.

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item worksharing-loop SIMD construct, see
\specref{subsubsec:Worksharing-Loop SIMD Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}









\subsection{\hcode{target}~\hcode{parallel} Construct}
\label{subsec:target parallel Construct}
\index{target parallel@{\code{target}~\code{parallel}}}
\index{constructs!target parallel@{\code{target}~\code{parallel}}}
\index{combined constructs!target parallel@{\code{target}~\code{parallel}}}
\summary
The \code{target} \code{parallel} construct is a shortcut for specifying a \code{target}
construct containing a \code{parallel} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{target} \code{parallel} construct is as follows:

\begin{ompcPragma}
#pragma omp target parallel \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{structured-block}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel} directives, except for \code{copyin}, with identical meanings and restrictions.
\end{ccppspecific}

\begin{samepage}
\begin{fortranspecific}
The syntax of the \code{target} \code{parallel} construct is as follows:

\begin{ompfPragma}
!$omp target parallel \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{structured-block}
!$omp end target parallel
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel} directives, except for \code{copyin}, with identical meanings and restrictions.
\end{fortranspecific}
\end{samepage}

\descr
The semantics are identical to explicitly specifying a \code{target} directive
immediately followed by a \code{parallel} directive.

\restrictions

The restrictions for the \code{target} and \code{parallel} constructs apply except for the following explicit modifications:

\begin{itemize}
\item If any \code{if} clause on the directive includes a
      \plc{directive-name-modifier} then all \code{if} clauses
      on the directive must include a \plc{directive-name-modifier}.

\item At most one \code{if} clause without a
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{parallel}
      \plc{directive-name-modifier} can appear on the directive.


\item At most one \code{if} clause with the \code{target}
      \plc{directive-name-modifier} can appear on the directive.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{parallel} construct, see
\specref{sec:parallel Construct}.

\item \code{target} construct, see
\specref{subsec:target Construct}.

\item \code{if} Clause, see \specref{sec:if Clause}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
%% \item Multi-if Clause, see \specref{subsec:Multi-if Clause}.
\end{itemize}









%Similar to Distribute Parallel Worksharing-Loop Construct

\subsection{Target Parallel Worksharing-Loop Construct}
\label{subsec:Target Parallel Worksharing-Loop Construct}
\index{target parallel worksharing-loop construct}
\index{constructs!target parallel worksharing-loop}
\index{constructs!target parallel for@{\code{target}~\code{parallel}~\code{for}}}
\index{constructs!target parallel do@{\code{target}~\code{parallel}~\code{do}}}
\index{combined constructs!target parallel worksharing-loop}
\summary
The target parallel worksharing-loop construct is a shortcut for specifying a \code{target}
construct containing a parallel worksharing-loop construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the target parallel worksharing-loop construct is as follows:

\begin{ompcPragma}
#pragma omp target parallel for \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel}~\code{for} directives, except for \code{copyin}, with identical meanings and restrictions.
\end{ccppspecific}

\needspace{6\baselineskip}
\begin{fortranspecific}
The syntax of the target parallel worksharing-loop construct is as follows:

\begin{ompfPragma}
!$omp target parallel do \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target parallel do\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel}~\code{do} directives, except for \code{copyin}, with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{parallel}~\code{do} directive is not specified, an
\code{end}~\code{target}~\code{parallel}~\code{do} directive is assumed at the end of
the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target} directive
immediately followed by a parallel worksharing-loop directive.


\restrictions
The restrictions for the \code{target} and parallel worksharing-loop constructs apply except for the following explicit modifications:

\begin{itemize}
\item If any \code{if} clause on the directive includes a
      \plc{directive-name-modifier} then all \code{if} clauses
      on the directive must include a \plc{directive-name-modifier}.

\item At most one \code{if} clause without a
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{parallel}
      \plc{directive-name-modifier} can appear on the directive.


\item At most one \code{if} clause with the \code{target}
      \plc{directive-name-modifier} can appear on the directive.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{target} construct, see
\specref{subsec:target Construct}.

\item Parallel Worksharing-Loop construct, see
\specref{subsec:Parallel Worksharing-Loop Construct}.

\item \code{if} Clause, see \specref{sec:if Clause}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.

%% \item Multi-if Clause, see \specref{subsec:Multi-if Clause}.
\end{itemize}









% Similar to Distribute Parallel Loop SIMD Construct

\subsection{Target Parallel Worksharing-Loop SIMD Construct}
\label{subsec:Target Parallel Worksharing-Loop SIMD Construct}
\index{target parallel worksharing-loop SIMD construct}
\index{constructs!target parallel worksharing-loop SIMD}
\index{constructs!target parallel for simd@{\code{target}~\code{parallel}~\code{for}~\code{simd}}}
\index{constructs!target parallel do simd@{\code{target}~\code{parallel}~\code{do}~\code{simd}}}
\index{combined constructs!target parallel worksharing-loop SIMD}
\summary
The target parallel worksharing-loop SIMD construct is a shortcut for specifying a \code{target}
construct containing a parallel worksharing-loop SIMD construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the target parallel worksharing-loop SIMD construct is as follows:

\begin{ompcPragma}
#pragma omp target parallel for simd \plc{[clause[
[},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel}~\code{for}~\code{simd} directives, except for \code{copyin}, with identical meanings and restrictions.
\end{ccppspecific}

\needspace{6\baselineskip}
\begin{fortranspecific}
The syntax of the target parallel worksharing-loop SIMD construct is as follows:

\begin{ompfPragma}
!$omp target parallel do simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target parallel do simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{parallel}~\code{do}~\code{simd} directives, except for \code{copyin}, with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{parallel}~\code{do}~\code{simd} directive is not specified, an
\code{end}~\code{target}~\code{parallel}~\code{do}~\code{simd} directive is assumed at the end of
the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target} directive
immediately followed by a parallel worksharing-loop SIMD directive.


\restrictions
The restrictions for the \code{target} and parallel worksharing-loop SIMD constructs apply except for the following explicit modifications:

\begin{itemize}
\item If any \code{if} clause on the directive includes a
      \plc{directive-name-modifier} then all \code{if} clauses
      on the directive must include a \plc{directive-name-modifier}.

\item At most one \code{if} clause without a
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{parallel}
      \plc{directive-name-modifier} can appear on the directive.


\item At most one \code{if} clause with the \code{target}
      \plc{directive-name-modifier} can appear on the directive.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{target} construct, see
\specref{subsec:target Construct}.

\item Parallel worksharing-loop SIMD construct, see
\specref{subsec:Parallel Worksharing-Loop SIMD Construct}.

\item \code{if} Clause, see \specref{sec:if Clause}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.

%% \item Multi-if Clause, see \specref{subsec:Multi-if Clause}.
\end{itemize}










\subsection{\hcode{target}~\hcode{simd} Construct}
\index{target simd@{\code{target}~\code{simd}}}
\index{constructs!target simd@{\code{target}~\code{simd}}}
\index{combined constructs!target simd@{\code{target}~\code{simd}}}
\label{subsec:target simd Construct}

\summary
The \code{target} \code{simd} construct is a shortcut for specifying a \code{target}
construct containing a \code{simd} construct and no other statements.


\syntax
\begin{ccppspecific}
The syntax of the \code{target} \code{simd} construct is as follows:

\begin{ompcPragma}
#pragma omp target simd \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{simd} directives with identical meanings and restrictions.

\end{ccppspecific}

\needspace{6\baselineskip}
\begin{fortranspecific}
The syntax of the \code{target} \code{simd} construct is as follows:

\begin{ompfPragma}
!$omp target simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{simd} directives with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{simd} directive is not specified, an
\code{end}~\code{target}~\code{simd} directive is assumed at the end of
the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target} directive
immediately followed by a \code{simd} directive.

\restrictions

The restrictions for the \code{target} and \code{simd} constructs apply.

\crossreferences
\begin{itemize}
\item \code{simd} construct, see
\specref{subsubsec:simd Construct}.

\item \code{target} construct, see
\specref{subsec:target Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}









\subsection{\hcode{target}~\hcode{teams} Construct}
\label{subsec:target teams Construct}
\index{target teams@{\code{target}~\code{teams}}}
\index{constructs!target teams@{\code{target}~\code{teams}}}
\index{combined constructs!target teams@{\code{target}~\code{teams}}}
\summary
The \code{target}~\code{teams} construct is a shortcut for specifying a \code{target} construct
containing a \code{teams} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{target}~\code{teams} construct is as follows:

\begin{ompcPragma}
#pragma omp target teams \plc{[clause[ [},\plc{] clause] ... ] new-line}
   \plc{structured-block}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or \code{teams} directives
with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{target}~\code{teams} construct is as follows:

\begin{ompfPragma}
!$omp target teams \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{structured-block}
!$omp end target teams
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or \code{teams} directives
with identical meanings and restrictions.
\end{fortranspecific}

\descr

The semantics are identical to explicitly specifying a \code{target} directive
immediately followed by a \code{teams} directive.

\restrictions
The restrictions for the \code{target} and \code{teams} constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see \specref{sec:teams Construct}.

\item \code{target} construct, see \specref{subsec:target Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}









\subsection{\hcode{teams}~\hcode{distribute} Construct}
\index{teams distribute@{\code{teams}~\code{distribute}}}
\index{constructs!teams distribute@{\code{teams}~\code{distribute}}}
\index{combined constructs!teams distribute@{\code{teams}~\code{distribute}}}
\label{subsec:teams distribute Construct}
\summary
The \code{teams}~\code{distribute} construct is a shortcut for specifying a \code{teams} construct
containing a \code{distribute} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{teams}~\code{distribute} construct is as follows:

\begin{ompcPragma}
#pragma omp teams distribute \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or \code{distribute}
directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{teams}~\code{distribute} construct is as follows:

\begin{ompfPragma}
!$omp teams distribute \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end teams distribute\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or \code{distribute}
directives with identical meanings and restrictions.

If an \code{end}~\code{teams}~\code{distribute} directive is not specified, an
\code{end}~\code{teams}~\code{distribute} directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{teams} directive immediately
followed by a \code{distribute} directive.


\restrictions
The restrictions for the \code{teams} and \code{distribute} constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see
\specref{sec:teams Construct}.

\item \code{distribute} construct, see
\specref{subsec:distribute Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}




\subsection{\hcode{teams}~\hcode{loop} Construct}
\index{teams loop@{\code{teams}~\code{loop}}}
\index{constructs!teams loop@{\code{teams}~\code{loop}}}
\index{combined constructs!teams loop@{\code{teams}~\code{loop}}}
\label{subsec:teams loop Construct}
\summary
The \code{teams}~\code{loop} construct is a shortcut for specifying a \code{teams} construct
containing a \code{loop} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{teams}~\code{loop} construct is as follows:

\begin{ompcPragma}
#pragma omp teams loop \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
  \code{loop} directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{teams}~\code{loop} construct is as follows:

\begin{ompfPragma}
!$omp teams loop \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end teams loop\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
  \code{loop}
directives with identical meanings and restrictions.

If an \code{end}~\code{teams}~\code{loop} directive is not specified, an
\code{end}~\code{teams}~\code{loop} directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{teams} directive immediately
followed by a \code{loop} directive.


\restrictions
The restrictions for the \code{teams} and \code{loop} constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see
\specref{sec:teams Construct}.

\item \code{loop} construct, see
\specref{subsec:loop Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}












\subsection{\hcode{teams}~\hcode{distribute}~\hcode{simd} Construct}
\index{teams distribute simd@{\code{teams}~\code{distribute}~\code{simd}}}
\index{constructs!teams distribute simd@{\code{teams}~\code{distribute}~\code{simd}}}
\index{combined constructs!teams distribute simd@{\code{teams}~\code{distribute}~\code{simd}}}
\label{subsec:teams distribute simd Construct}
\summary
The \code{teams}~\code{distribute}~\code{simd} construct is a shortcut for specifying a \code{teams} construct
containing a \code{distribute}~\code{simd} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{teams}~\code{distribute}~\code{simd} construct is as follows:

\begin{ompcPragma}
#pragma omp teams distribute simd \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or \code{distribute}~\code{simd}
directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{teams}~\code{distribute}~\code{simd} construct is as follows:

\begin{ompfPragma}
!$omp teams distribute simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end teams distribute simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or \code{distribute}~\code{simd}
directives with identical meanings and restrictions.

If an \code{end}~\code{teams}~\code{distribute}~\code{simd} directive is
not specified, an \code{end}~\code{teams}~\code{distribute}~\code{simd}
directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{teams} directive immediately
followed by a \code{distribute}~\code{simd} directive.


\restrictions
The restrictions for the \code{teams} and \code{distribute}~\code{simd} constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see
\specref{sec:teams Construct}.

\item \code{distribute}~\code{simd} construct, see
\specref{subsec:distribute simd Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}











\subsection{\hcode{target}~\hcode{teams}~\hcode{distribute} Construct}
\index{target teams distribute@{\code{target}~\code{teams}~\code{distribute}}}
\index{constructs!target teams distribute@{\code{target}~\code{teams}~\code{distribute}}}
\index{combined constructs!target teams distribute@{\code{target}~\code{teams}~\code{distribute}}}
\label{subsec:target teams distribute construct}
\summary
The \code{target}~\code{teams}~\code{distribute} construct is a shortcut for specifying a \code{target} construct
containing a \code{teams}~\code{distribute} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{target}~\code{teams}~\code{distribute} construct is as follows:

\begin{ompcPragma}
#pragma omp target teams distribute \plc{[clause[ [},\plc{] clause] ... ] new-line}
   \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or \code{teams}~\code{distribute} directives
with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{target}~\code{teams}~\code{distribute} construct is as follows:

\begin{ompfPragma}
!$omp target teams distribute \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target teams distribute\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or \code{teams}~\code{distribute} directives
with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{teams}~\code{distribute} directive is not specified, an
\code{end}~\code{target}~\code{teams}~\code{distribute} directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target} directive immediately
followed by a \code{teams}~\code{distribute} directive.

\restrictions
The restrictions for the \code{target} and \code{teams}~\code{distribute} constructs.

\crossreferences
\begin{itemize}
\item \code{target} construct, see
\specref{subsec:target data Construct}.

\item \code{teams}~\code{distribute} construct, see
\specref{subsec:teams distribute Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}










\subsection{\hcode{target}~\hcode{teams}~\hcode{distribute}~\hcode{simd} Construct}
\index{target teams distribute simd@{\code{target}~\code{teams}~\code{distribute}~\code{simd}}}
\index{constructs!target teams distribute simd@{\code{target}~\code{teams}~\code{distribute}~\code{simd}}}
\index{combined constructs!target teams distribute simd@{\code{target}~\code{teams}~\code{distribute}~\code{simd}}}
\label{subsec:target teams distribute simd construct}
\summary
The \code{target}~\code{teams}~\code{distribute}~\code{simd} construct is a shortcut for specifying a \code{target} construct
containing a \code{teams}~\code{distribute}~\code{simd} construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the \code{target}~\code{teams}~\code{distribute}~\code{simd} construct is as follows:

\begin{ompcPragma}
#pragma omp target teams distribute simd \plc{\}
            \plc{[clause[ [},\plc{] clause] ...  ] new-line}
   \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{teams}~\code{distribute}~\code{simd} directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the \code{target}~\code{teams}~\code{distribute}~\code{simd} construct is as follows:

\begin{ompfPragma}
!$omp target teams distribute simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target teams distribute simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{teams}~\code{distribute}~\code{simd} directives with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{teams}~\code{distribute}~\code{simd} directive is not specified, an
\code{end}~\code{target}~\code{teams}~\code{distribute}~\code{simd} directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target} directive immediately
followed by a \code{teams}~\code{distribute}~\code{simd} directive.

\restrictions
The restrictions for the \code{target} and \code{teams}~\code{distribute}~\code{simd} constructs apply.


\crossreferences
\begin{itemize}
\item \code{target} construct, see
\specref{subsec:target data Construct}.

\item \code{teams}~\code{distribute}~\code{simd} construct, see
\specref{subsec:teams distribute simd Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}











\subsection{Teams Distribute Parallel Worksharing-Loop Construct}
\label{subsec:Teams Distribute Parallel Worksharing-Loop Construct}
\index{teams distribute parallel worksharing-loop construct}
\index{constructs!teams distribute parallel worksharing-loop construct}
\index{combined constructs!teams distribute parallel worksharing-loop construct}
\summary
The teams distribute parallel worksharing-loop construct is a shortcut for specifying a \code{teams}
construct containing a distribute parallel worksharing-loop construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the teams distribute parallel worksharing-loop construct is as follows:

\begin{ompcPragma}[fontsize=\small]
#pragma omp teams distribute parallel for \plc{\}
            \plc{[clause[ [},\plc{] clause] ...  ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
\code{distribute}~\code{parallel}~\code{for} directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the teams distribute parallel worksharing-loop construct is as follows:

\begin{ompfPragma}
!$omp teams distribute parallel do \plc{[clause[ [},\plc{] clause] ... ]}
   \plc{do-loops}
\plc{[} !$omp end teams distribute parallel do \plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
\code{distribute}~\code{parallel}~\code{do} directives with identical meanings and restrictions.

If an \code{end}~\code{teams}~\code{distribute}~\code{parallel}~\code{do} directive is not specified, an
\code{end}~\code{teams}~\code{distribute}~\code{parallel}~\code{do} directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{teams} directive immediately
followed by a distribute parallel worksharing-loop directive.

\restrictions
The restrictions for the \code{teams} and distribute parallel worksharing-loop constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see
\specref{sec:teams Construct}.

\item Distribute parallel worksharing-loop construct, see
\specref{subsec:Distribute Parallel Worksharing-Loop Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}









\subsection{Target Teams Distribute Parallel Worksharing-Loop Construct}
\label{subsec:Target Teams Distribute Parallel Worksharing-Loop Construct}
\index{target teams distribute parallel worksharing-loop construct}
\index{constructs!target teams distribute parallel worksharing-loop construct}
\index{combined constructs!target teams distribute parallel worksharing-loop construct}
\summary
The target teams distribute parallel worksharing-loop construct is a shortcut for specifying a \code{target}
construct containing a teams distribute parallel worksharing-loop construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the target teams distribute parallel worksharing-loop construct is as follows:

\begin{ompcPragma}[fontsize=\small]
#pragma omp target teams distribute parallel for \plc{\}
            \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{teams}~\code{distribute}~\code{parallel}~\code{for} directives with identical
meanings and restrictions.
\end{ccppspecific}

\needspace{6\baselineskip}
\begin{fortranspecific}
The syntax of the target teams distribute parallel worksharing-loop construct is as follows:

\begin{ompfPragma}
!$omp target teams distribute parallel do \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target teams distribute parallel do\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{teams}~\code{distribute}~\code{parallel}~\code{do} directives with
identical meanings and restrictions.

If an \code{end}~\code{target}~\code{teams}~\code{distribute}~\code{parallel}~\code{do} directive is not specified, an
\code{end}~\code{target}~\code{teams}~\code{distribute}~\code{parallel}~\code{do}
directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target}
directive immediately followed by a teams distribute parallel worksharing-loop directive.


\restrictions
The restrictions for the \code{target} and teams distribute parallel
worksharing-loop constructs apply except for the following explicit modifications:

\begin{itemize}
\item If any \code{if} clause on the directive includes a
      \plc{directive-name-modifier} then all \code{if} clauses
      on the directive must include a \plc{directive-name-modifier}.

\item At most one \code{if} clause without a
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{parallel}
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{target}
      \plc{directive-name-modifier} can appear on the directive.
\end{itemize}

\crossreferences
\begin{itemize}
\item \code{target} construct, see \specref{subsec:target Construct}.

\item Teams distribute parallel worksharing-loop construct, see
      \specref{subsec:Teams Distribute Parallel Worksharing-Loop Construct}.

\item \code{if} Clause, see \specref{sec:if Clause}.

\item Data attribute clauses, see
      \specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}










\subsection{Teams Distribute Parallel Worksharing-Loop SIMD Construct}
\label{subsec:Teams Distribute Parallel Worksharing-Loop SIMD Construct}
\index{teams distribute parallel worksharing-loop SIMD construct}
\index{constructs!teams distribute parallel worksharing-loop SIMD construct}
\index{combined constructs!teams distribute parallel worksharing-loop SIMD construct}
\summary
The teams distribute parallel worksharing-loop SIMD construct is a shortcut for specifying a \code{teams}
construct containing a distribute parallel worksharing-loop SIMD construct and no other statements.


\syntax
\begin{ccppspecific}
The syntax of the teams distribute parallel worksharing-loop construct is as follows:

\begin{ompcPragma}[fontsize=\small]
#pragma omp teams distribute parallel for simd \plc{\}
            \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
\code{distribute}~\code{parallel}~\code{for}~\code{simd}
directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the teams distribute parallel worksharing-loop construct is as follows:

\begin{ompfPragma}
!$omp teams distribute parallel do simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end teams distribute parallel do simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the \code{teams} or
\code{distribute}~\code{parallel}~\code{do}~\code{simd}
directives with identical meanings and restrictions.

If an \code{end}~\code{teams}~\code{distribute}~\code{parallel}~\code{do}~\code{simd} directive is not specified, an
\code{end}~\code{teams}~\code{distribute}~\code{parallel}~\code{do}~\code{simd} directive is assumed at the end of
the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{teams} directive immediately
followed by a distribute parallel worksharing-loop SIMD directive. 

\restrictions
The restrictions for the \code{teams} and distribute parallel worksharing-loop
SIMD constructs apply.

\crossreferences
\begin{itemize}
\item \code{teams} construct, see
\specref{sec:teams Construct}.

\item Distribute parallel worksharing-loop SIMD construct, see
\specref{subsec:Distribute Parallel Worksharing-Loop SIMD Construct}.

\item Data attribute clauses, see
\specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}










\subsection{Target Teams Distribute Parallel Worksharing-Loop SIMD Construct}
\label{subsec:Target Teams Distribute Parallel Loop SIMD Construct}
\index{target teams distribute parallel worksharing-loop SIMD construct}
\index{constructs!target teams distribute parallel worksharing-loop SIMD construct}
\index{combined constructs!target teams distribute parallel worksharing-loop SIMD construct}
\summary
The target teams distribute parallel worksharing-loop SIMD construct is a shortcut for specifying a \code{target}
construct containing a teams distribute parallel worksharing-loop SIMD construct and no other statements.

\syntax
\begin{ccppspecific}
The syntax of the target teams distribute parallel worksharing-loop SIMD construct is as follows:

\begin{ompcPragma}
#pragma omp target teams distribute parallel for simd \plc{\}
            \plc{[clause[ [},\plc{] clause] ... ] new-line}
    \plc{for-loops}
\end{ompcPragma}

where \plc{clause} can be any of the clauses accepted by the \code{target} or
\code{teams}~\code{distribute}~\code{parallel}~\code{for}~\code{simd}
directives with identical meanings and restrictions.
\end{ccppspecific}

\begin{fortranspecific}
The syntax of the target teams distribute parallel worksharing-loop SIMD construct is as follows:

\begin{ompfPragma}
!$omp target teams distribute parallel do simd \plc{[clause[ [},\plc{] clause] ... ]}
    \plc{do-loops}
\plc{[}!$omp end target teams distribute parallel do simd\plc{]}
\end{ompfPragma}

where \plc{clause} can be any of the clauses accepted by the
\code{target} or \code{teams}~\code{distribute}~\code{parallel}~\code{do}~\code{simd}
directives with identical meanings and restrictions.

If an \code{end}~\code{target}~\code{teams}~\code{distribute}~\code{parallel}~\code{do}~\code{simd}
directive is not specified, an
\code{end}~\code{target}~\code{teams}~\code{distribute}~\code{parallel}~\code{do}~\code{simd}
directive is assumed at the end of the \plc{do-loops}.
\end{fortranspecific}

\descr
The semantics are identical to explicitly specifying a \code{target}
directive immediately followed by a teams distribute parallel worksharing-loop
SIMD directive. 


\restrictions
The restrictions for the \code{target} and teams distribute parallel
worksharing-loop SIMD constructs apply except for the following explicit modifications:

\begin{itemize}
\item If any \code{if} clause on the directive includes a
      \plc{directive-name-modifier} then all \code{if} clauses
      on the directive must include a \plc{directive-name-modifier}.

\item At most one \code{if} clause without a
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{parallel}
      \plc{directive-name-modifier} can appear on the directive.

\item At most one \code{if} clause with the \code{target}
      \plc{directive-name-modifier} can appear on the directive.
  \end{itemize}

\crossreferences
\begin{itemize}
\item \code{target} construct, see \specref{subsec:target Construct}.

\item Teams distribute parallel worksharing-loop SIMD construct, see
      \specref{subsec:Teams Distribute Parallel Worksharing-Loop SIMD Construct}.

\item \code{if} Clause, see \specref{sec:if Clause}.

\item Data attribute clauses, see
      \specref{subsec:Data-Sharing Attribute Clauses}.
\end{itemize}

%% \filbreak
\section{Clauses on Combined and Composite Constructs}
\label{sec:Clauses on Combined and Composite Constructs}
This section specifies the handling of clauses on combined or composite constructs and handling of implicit clauses from
variables with predetermined data sharing if they are not predetermined only on a particular construct.
Some clauses are permitted only on a single construct from the constructs that
constitute the combined or composite construct, the effect is then as if the
clause is applied to that specific construct.  Other clauses have the effect as if
they are applied to one or more constituent constructs as specified below:

\begin{itemize}
\item The \code{collapse} clause is applied once for the whole combined or composite construct.

\item For the \code{private} clause the effect is as if it is applied to the innermost constituent construct only.

\item For the \code{firstprivate} clause the effect is as if it is applied to one or more
constructs as follows:
\begin{itemize}
\item to the \code{distribute} construct if it is among the constituent constructs,

\item to the \code{teams} construct if it is among the constituent constructs and \code{distribute} construct is not,

\item to the worksharing-loop construct if it is among the constituent constructs,

\item to the \code{parallel} construct if it is among the constituent
  constructs and the worksharing-loop construct is not,

\item to the outermost constituent construct if not already applied to it by the above
rules and the outermost constituent construct is neither \code{teams} nor \code{parallel}
nor \code{target} construct,

\item to the \code{target} construct if it is among the constituent
constructs and the same list item does not appear in \code{lastprivate} or \code{map} clause.
\end{itemize}

If the \code{parallel} construct is among the constituent constructs and the
effect is not as if the \code{firstprivate} clause is applied to it by the
above rules, then the effect is as if the \code{shared} clause with the same
list item is applied to the \code{parallel} construct.

If the \code{teams} construct is among the constituent constructs and the
effect is not as if the \code{firstprivate} clause is applied to it by the
above rules, then the effect is as if the \code{shared} clause with the same
list item is applied to the \code{teams} construct.

\item For the \code{lastprivate} clause the effect is as if it is applied to one or more
constructs as follows:

\begin{itemize}

\item to the worksharing-loop construct if it is among the constituent constructs,

\item to the \code{distribute} construct if it is among the constituent constructs,

\item to the innermost constituent construct that permits it unless it is a
worksharing-loop or \code{distribute} construct.
\end{itemize}

If the \code{parallel} construct is among the constituent constructs and the
list item is not also mentioned in the \code{firstprivate} clause, then the effect is as
if the \code{shared} clause with the same list item is applied to the \code{parallel} construct.

If the \code{teams} construct is among the constituent constructs and the
list item is not also mentioned in the \code{firstprivate} clause, then the effect is as
if the \code{shared} clause with the same list item is applied to the \code{teams} construct.

If the \code{target} construct is among the constituent constructs and the list item doesn't
appear in a \code{map} clause the effect is as if the same list item appears in a \code{map} clause
with a \plc{map-type} of \code{tofrom}.

\item For the \code{shared}, \code{default}, \code{order}, or \code{allocate} clauses the effect is as if it is applied to all
the constituent constructs that permit those clauses.

%\item For the \code{reduction} clause the effect is as if it is applied to all the constructs that permit
%the clause, except that it is not applied to the worksharing-loop or \code{sections} construct if they are
%combined with the \code{parallel} construct and neither the \code{inscan} or \code{task} modifier is present.  
%If the construct is combined with the \code{target} construct, the effect is also as if the same list
%item appears in a \code{map} clause with a \plc{map-type} of \code{tofrom}.

\item For the \code{reduction} clause the effect is as if it is applied to all the constructs that permit
the clause, except for the following constructs:
\begin{itemize}
\item the \code{parallel} construct, when combined with the
    worksharing-loop, \code{loop}, or \code{sections} construct;
\item the \code{teams} construct,  when combined with the \code{loop} construct.
\end{itemize}
For the \code{parallel} and \code{teams} constructs above, the behavior
instead is as if each list item or, for any list item that is an array item, its corresponding
named array or named pointer appears in a \code{shared} clause for the construct.
If \plc{reduction-modifier} is specified, the effect is as if it only modifies
the behavior of the \code{reduction} clause for the innermost construct that
constitutes the combined construct and accepts the modifier (see
Section~\ref{subsubsec:reduction clause}). If the construct is combined with
the \code{target} construct, the effect is also as if the same list item
appears in a \code{map} clause with a \plc{map-type} of \code{tofrom}.

\item The \code{in_reduction} clause is permitted on a single construct
among the combined or composite construct and the effect is as if it is
applied to that construct, but if that construct is \code{target}, the
effect is also as if the same list item appears in a \code{map} clause with
a \plc{map-type} of \code{tofrom} and a \plc{map-type-modifier} of
\code{always}.

\item For the \code{if} clause the effect is described in the \specref{sec:if Clause} section.

\item For the \code{linear} clause the effect is as if it is applied to the innermost
constituent construct.
Additionally, if the list item is not the iteration variable of the
\code{simd} or worksharing-loop SIMD
construct, the effect on the outer constituent constructs is as if the list item was present
in the \code{firstprivate} and \code{lastprivate} clauses on the combined or
composite construct and the rules specified above would apply.  If the list item is the
iteration variable of the \code{simd} or worksharing-loop SIMD construct and it is not declared in the construct,
the effect on the outer constituent constructs is as if the list item was present in the
\code{lastprivate} clause on the combined or composite construct and the rules specified above
would apply.

\item For the \code{nowait} clause the effect is as if it is applied to the
outermost constituent construct that permits it.

\end{itemize}

If the clauses have expressions on them, such as for various clauses where the argument of the
clause is an expression, or \plc{lower-bound}, \plc{length}, or \plc{stride} expressions inside array
sections (or \plc{subscript} and \plc{stride} expressions in \plc{subscript-triple} for Fortran),
or \plc{linear-step} or \plc{alignment} expressions, the expressions are evaluated immediately
before the construct to which the clause has been split or duplicated per the
above rules (therefore inside of the outer constituent constructs), except that the expressions inside
of the \code{num_teams} and \code{thread_limit} clauses are always evaluated before the outermost
constituent construct.

The restriction that a list item may not appear in more than one data
sharing clause with the exception of specifying a variable in both
\code{firstprivate} and \code{lastprivate} clauses applies after the clauses
are split or duplicated per the above rules.
