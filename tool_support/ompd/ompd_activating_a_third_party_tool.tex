\subsection{Activating an OMPD Tool}
\label{subsec:activating}

The tool and the OpenMP program the tool controls
exist as separate processes.; thus coordination is required between the OpenMP runtime
%resident in the OpenMP program
and the external tool for OMPD to be used successfully.

\subsubsection{Enabling the Runtime for OMPD}
\label{subsubsec:enabling-ompd}

In order to support external tools, the OpenMP runtime may need to collect
and maintain information that it might otherwise not do, perhaps
for performance reasons, or because it is not otherwise needed.
The OpenMP runtime collects whatever information is necessary
to support OMPD if the environment variable \code{OMP_DEBUG} is set to \plc{enabled}.

\crossreferences
\begin{itemize}
\item
  \code{OMP_DEBUG}, \specref{sec:OMP_DEBUG}
\item
  Activating an OMPT Tool, \specref{sec:ompt-initialization}
\end{itemize}

\subsubsection{Finding the OMPD library}
\label{subsubsec:finding-the-ompd}

An OpenMP runtime may have more than one matching OMPD libary for
tools to use.
The tool must be able to locate the right library to use
for the OpenMP program it is examining.

As part of the OpenMP interface, OMPD requires that the OpenMP
runtime system provides a public variable \code{ompd_dll_locations},
which is an \code{argv}-style vector of filename string pointers that
provides the name(s) of any compatible OMPD library implementations.
\code{ompd_dll_locations} must have \code{C} linkage.
The tool uses the name of the variable verbatim,
and in particular, will not apply any name mangling before
performing the look up.

\code{ompd_dll_locations} points to a NULL-terminated
vector of zero or more NULL-terminated pathname strings.
There are no filename conventions for pathname strings.
The last entry in the vector is NULL.
The vector of string pointers must be fully initialized \emph{before}
\code{ompd_dll_locations} is set to a non-NULL value,
such that if the tool, such as a debugger,
stops execution of the OpenMP program at any point where
\code{ompd_dll_locations} is non-NULL,
then the vector of strings it points to is valid and complete.

The programming model or architecture of the tool (and hence
that of the required OMPD) does not have to match that of the OpenMP program
being examined.
It is the responsibility of the tool to interpret the contents
of \code{ompd_dll_locations} to find a suitable OMPD that matches
its own architectural characteristics.
On platforms that support different programming models
(\textit{e.g.}, 32-bit vs 64-bit), OpenMP implementers are encouraged
to provide OMPD library for all models, and which can handle
OpenMP programs of any model.
Thus, for example, a 32-bit debugger using OMPD should be able
to debug a 64-bit OpenMP program
by loading a 32-bit OMPD that can manage a 64-bit OpenMP runtime.

\crossreferences
\begin{itemize}
	\item Identifying the Matching OMPD, \specref{subsubsec:ompd_dll_locations}
	%\item \code{ompd_enable}, \specref{subsubsec:ompd_enable}
	%\item Activating an OMPT Tool, \specref{ompd:ompt-initialization}
\end{itemize}



