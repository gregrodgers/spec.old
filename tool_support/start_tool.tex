\ompttoolsignature{\code{ompt\_start\_tool}}
\label{sec:ompt_start_tool}

\summary
If a tool wants to use the OMPT interface provided by an OpenMP implementation,
the tool must implement the function \code{ompt\_start\_tool} to announce its interest.

\format
\vbox{
\begin{cspecific}
\begin{boxedcode}
ompt_start_tool_result_t *ompt_start_tool(
  unsigned int \plc{omp_version},
  const char *\plc{runtime_version}
);
\end{boxedcode}
\end{cspecific}
}

\descr
For a tool to use the OMPT interface provided by an OpenMP implementation,
the tool must define a globally-visible implementation of the
function \code{ompt\_start\_tool}.

A tool may indicate its intent to use the OMPT interface provided
by an OpenMP implementation by having
\code{ompt\_start\_tool} return a non-\code{NULL} pointer to an
\code{ompt\_start\_tool\_result\_t} structure, which contains pointers to
tool initialization and finalization callbacks along with
a tool data word that an OpenMP implementation must pass by reference
to these callbacks.

A tool may use its \callbackarg{} \plc{omp\_version} to determine
whether it is compatible with the OMPT interface provided by an OpenMP
implementation.

If a tool implements \code{ompt\_start\_tool} but has no interest in using
the OMPT interface in a particular execution,
\code{ompt\_start\_tool} should return \code{NULL}. 

\argdesc

The \callbackarg{} \plc{omp\_version} 
is the value of the \code{\_OPENMP} version macro 
associated with the OpenMP API implementation. This value 
identifies the OpenMP API version supported by an OpenMP implementation,
which specifies the version of the OMPT interface that it supports.

The \callbackarg{} \plc{runtime\_version}
is a version string that unambiguously identifies the OpenMP implementation.

\constraints

The \callbackarg{} \plc{runtime\_version} must be
an immutable string that is defined for the lifetime of a program
execution.

\effect
If a tool returns a non-\code{NULL} pointer to an
\code{ompt\_start\_tool\_result\_t} structure,
an OpenMP implementation will call the tool initializer specified by the
\plc{initialize} field in this structure before
beginning execution of any OpenMP construct
or completing execution of any environment routine invocation; the
OpenMP implementation will call the tool finalizer specified by the
\plc{finalize} field in this structure when the OpenMP
implementation shuts down.



\crossreferences
\begin{itemize}
    \item \code{ompt\_start\_tool\_result\_t}, see 
     \specref{sec:ompt_start_tool_result_t}.
\end{itemize}

