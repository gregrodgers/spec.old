\subsubsection{\hcode{ompt_start_tool}}
\label{sec:ompt_start_tool}

\summary
In order to use the OMPT interface provided by an OpenMP implementation,
a tool must implement the function \code{ompt_start_tool}, through which 
the OpenMP implementation initializes the tool.

\format
\begin{cspecific}
\begin{omptOther}
ompt_start_tool_result_t *ompt_start_tool(
  unsigned int \plc{omp_version},
  const char *\plc{runtime_version}
);
\end{omptOther}
\end{cspecific}


\descr
For a tool to use the OMPT interfeace that an OpenMP implementation provides,
the tool must define a globally-visible implementation of the
function \code{ompt_start_tool}. The tool indicates that it will use the OMPT 
interface that an OpenMP implementation provides by returning a non-\code{NULL} 
pointer to an \code{ompt_start_tool_result_t} structure from the 
\code{ompt_start_tool} implementation that it provides. The 
\code{ompt_start_tool_result_t} structure contains pointers to tool 
initialization and finalization callbacks as well as a tool data word 
that an OpenMP implementation must pass by reference to these callbacks. 
A tool may return \code{NULL} from \code{ompt_start_tool} to indicate 
that it will not use the OMPT interface in a particular execution.

A tool may use the \plc{omp_version} argument to determine if it is 
compatible with the OMPT interface that the OpenMP implementation provides.

\argdesc

The argument \plc{omp_version} is the value of the \code{_OPENMP} version macro
associated with the OpenMP API implementation. This value identifies the OpenMP 
API version that an OpenMP implementation supports, which specifies the version 
of the OMPT interface that it supports.

The argument \plc{runtime_version} is a version string that unambiguously 
identifies the OpenMP implementation.

\constraints

The argument \plc{runtime_version} must be an immutable string that is defined 
for the lifetime of a program execution.

\effect
<<<<<<< HEAD
If a tool returns a non-null pointer to an
\code{ompt_start_tool_result_t} structure,
an OpenMP implementation will call the tool initializer specified by the
\plc{initialize} field in this structure before
beginning execution of any OpenMP construct
or completing execution of any environment routine invocation; the
OpenMP implementation will call the tool finalizer specified by the
\plc{finalize} field in this structure when the OpenMP
implementation shuts down.


=======
If a tool returns a non-\code{NULL} pointer to an \code{ompt_start_tool_result_t} 
structure, an OpenMP implementation will call the tool initializer specified by 
the \plc{initialize} field in this structure before beginning execution of any 
OpenMP construct or completing execution of any environment routine invocation; 
the OpenMP implementation will call the tool finalizer specified by the 
\plc{finalize} field in this structure when the OpenMP implementation shuts down.
>>>>>>> master

\crossreferences
\begin{itemize}
\item \code{ompt_start_tool_result_t}, see
\specref{sec:ompt_start_tool_result_t}.
\end{itemize}

